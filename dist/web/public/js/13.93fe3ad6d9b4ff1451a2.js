webpackJsonp([13],{gZnZ:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("Xxa5"),i=l.n(a),r=l("exGp"),o=l.n(r),s=l("JA1M"),n=l("ZHXk"),c=l.n(n),u=function(e){return s.a.get("/sysm/fileMgr/querySysFile",{params:e})},p=function(e){return s.a.delete("/sysm/fileMgr/delSysFile/"+e)},f=function(e,t){return s.a.put("/sysm/fileMgr/changeSysFileStat/"+e+"/"+t)},d=function(){return c.a.getProxyUrl("/sysm/fileMgr/saveSysFile")},m=l("Dd8w"),v=l.n(m),y=l("zL8q"),h={props:v()({},y.Upload.props,{tip:{type:String,default:null}}),data:function(){return{}},methods:{getEl:function(){return this.$refs.elUpload}}},F={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-upload",e._g(e._b({ref:"elUpload",staticClass:"file-upload"},"el-upload",this.$props,!1),this.$listeners),[e.drag?[l("i",{staticClass:"el-icon-upload"}),e._v(" "),l("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),l("em",[e._v("点击上传")])]),e._v(" "),e.tip?l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip))]):e._e()]:e._e()],2)},staticRenderFns:[]};var b={components:{FileUpdata:l("VU/8")(h,F,!1,function(e){l("vsKI")},null,null).exports},data:function(){return{showSysFileDia:!1,sysFileForm:{fileName:"",fileUrl:"",fileType:"",fileStat:""},sysFile:{},updataUrl:d()}},methods:{loadSysFile:function(e){return u(e)},handleQuerySysFile:function(){this.$refs.sysFileTable.loadData(this.sysFileForm)},handleDelSysFile:function(e){var t=this;return o()(i.a.mark(function l(){return i.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,p([e.uuid]);case 3:l.next=7;break;case 5:l.prev=5,l.t0=l.catch(0);case 7:return l.prev=7,t.handleQuerySysFile(),l.finish(7);case 10:case"end":return l.stop()}},l,t,[[0,5,7,10]])}))()},doChangeFileStat:function(e,t){var l=this;return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,f([t.uuid],e);case 3:a.next=7;break;case 5:a.prev=5,a.t0=a.catch(0);case 7:return a.prev=7,l.handleQuerySysFile(),a.finish(7);case 10:case"end":return a.stop()}},a,l,[[0,5,7,10]])}))()},handleAddSysFile:function(){this.showSysFileDia=!0},doSysFileDiaClose:function(e){this.handleQuerySysFile(),e()}}},w={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("flex-container",{attrs:{wrap:"nowrap",justifyContent:"space-between"}},[l("flex-item",{attrs:{grow:1,width:"100%"}},[l("el-card",[l("flex-container",{attrs:{slot:"header",justifyContent:"space-between"},slot:"header"},[l("flex-item",{attrs:{alignItems:"center"}},[l("i",{staticClass:"icon-fa fa-file-o margin-right-6 font-size-16"}),e._v("附件管理\n        ")]),e._v(" "),l("flex-item",{attrs:{alignItems:"center"}},[l("el-button",{attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-plus",title:"添加"},on:{click:e.handleAddSysFile}}),e._v(" "),l("el-button",{attrs:{type:"primary",size:"mini",circle:"",icon:"el-icon-search",title:"查询"},on:{click:e.handleQuerySysFile}}),e._v(" "),l("el-button",{attrs:{size:"mini",circle:"",plain:"",icon:"el-icon-refresh-left",title:"重置"},on:{click:function(t){e.$refs.sysFileForm.resetFields(),e.startTime=[]}}})],1)],1),e._v(" "),l("flex-container",{attrs:{direction:"column",wrap:"nowrap"}},[l("flex-item",{staticClass:"margin-bottom-10"},[l("el-form",{ref:"sysFileForm",staticClass:"form-style-line",attrs:{model:e.sysFileForm,"label-position":"right","label-width":"90px"}},[l("el-row",[l("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[l("el-form-item",{attrs:{label:"文件名称 :",prop:"fileName"}},[l("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.sysFileForm.fileName,callback:function(t){e.$set(e.sysFileForm,"fileName",t)},expression:"sysFileForm.fileName"}})],1)],1),e._v(" "),l("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[l("el-form-item",{attrs:{label:"外网地址 :",prop:"fileUrl"}},[l("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.sysFileForm.fileUrl,callback:function(t){e.$set(e.sysFileForm,"fileUrl",t)},expression:"sysFileForm.fileUrl"}})],1)],1),e._v(" "),l("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[l("el-form-item",{attrs:{label:"文件类型 :",prop:"fileType"}},[l("el-input",{attrs:{maxlength:"10","show-word-limit":""},model:{value:e.sysFileForm.fileType,callback:function(t){e.$set(e.sysFileForm,"fileType",t)},expression:"sysFileForm.fileType"}})],1)],1),e._v(" "),l("col-pr",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[l("el-form-item",{attrs:{label:"文件状态 :",prop:"fileStat"}},[l("dict-select",{attrs:{"dict-key":"FileStat",placeholder:"请选择",clearable:""},model:{value:e.sysFileForm.fileStat,callback:function(t){e.$set(e.sysFileForm,"fileStat",t)},expression:"sysFileForm.fileStat"}})],1)],1)],1)],1)],1),e._v(" "),l("flex-item",[l("data-table",{ref:"sysFileTable",attrs:{border:"",index:"","auto-load":"","highlight-current-row":"","auto-update":"","column-button":"","csv-button":"",title:"Data Table","load-data-func":e.loadSysFile}},[l("data-table-column",{attrs:{prop:"fileName",label:"文件名称","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"fileMd5",label:"文件MD5","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"filePath",label:"服务器存放地址","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"fileUrl",label:"外网访问地址","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"fileType",label:"文件类型",width:"70","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"fileSize",label:"文件大小(KB)",width:"100","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"fileStat",label:"文件状态",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tooltip",{attrs:{content:e.$utils.getDictSelectValue("FileStat",t.row.fileStat),placement:"top"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"2"},on:{change:function(l){return e.doChangeFileStat(l,t.row)}},model:{value:t.row.fileStat,callback:function(l){e.$set(t.row,"fileStat",l)},expression:"scope.row.fileStat"}})],1)]}}])}),e._v(" "),l("data-table-column",{attrs:{prop:"createdUser",label:"创建人",width:"60","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"createdTime",label:"创建时间",width:"135",formatter:e.$utils.tableColTimeFormt}}),e._v(" "),l("data-table-column",{attrs:{prop:"updatedUser",label:"更新人",width:"60","show-overflow-tooltip":""}}),e._v(" "),l("data-table-column",{attrs:{prop:"updatedTime",label:"更新时间",width:"135",formatter:e.$utils.tableColTimeFormt}}),e._v(" "),l("data-table-column",{attrs:{prop:"op",width:"80",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"mini",icon:"icon-ali ali-xiazai",title:"下载"},on:{click:function(l){e.$utils.downFile(t.row.fileUrl)}}}),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete",title:"删除"},on:{click:function(l){e.handleDelSysFile(t.row)}}})]}}])})],1)],1)],1)],1)],1),e._v(" "),l("dialog-drag",{attrs:{visible:e.showSysFileDia,"before-close":e.doSysFileDiaClose},on:{"update:visible":function(t){e.showSysFileDia=t}}},[l("span",{attrs:{slot:"title"},slot:"title"},[l("i",{staticClass:"el-icon-upload margin-right-4"}),e._v("文件上传\n    ")]),e._v(" "),l("flex-container",[l("flex-item",{attrs:{width:"100%"}},[l("file-updata",{ref:"fileUpdata",attrs:{action:e.updataUrl,"auto-upload":!1,drag:"",multiple:""}})],1),e._v(" "),l("flex-container",{staticClass:"footer",attrs:{justifyContent:"flex-end"}},[l("el-button",{on:{click:function(t){e.$refs.fileUpdata.getEl().abort()}}},[e._v("中 断")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$refs.fileUpdata.getEl().submit()}}},[e._v("上 传")])],1)],1)],1)],1)},staticRenderFns:[]},_=l("VU/8")(b,w,!1,null,null,null);t.default=_.exports},vsKI:function(e,t){}});
//# sourceMappingURL=13.93fe3ad6d9b4ff1451a2.js.map